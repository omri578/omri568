<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>לוח תוצאות</title>

  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0b5b2a">

  <style>
    body{margin:0;font-family:Arial;background:#000}
    .app{
      min-height:100vh;
      background:url("assets/pitch.png") center/cover no-repeat;
      position:relative;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:16px;
    }
    .overlay{position:absolute;inset:0;background:rgba(0,0,0,.45)}
    .content{position:relative;z-index:2;width:100%;max-width:900px}
    h1{color:#fff;text-align:center;margin-bottom:16px}

    .row{display:flex;align-items:center;justify-content:space-between;gap:12px}

    .team{
      width:30%;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:8px;
      cursor:pointer;
    }

    .logo{
      width:100px;height:100px;
      border-radius:18px;
      overflow:hidden;
      border:3px solid #fff;
    }
    .logo img{width:100%;height:100%;object-fit:cover}
    .name{color:#fff;font-weight:800;text-align:center}

    .scorebox{
      background:rgba(0,0,0,.7);
      border-radius:18px;
      padding:14px 20px;
      display:flex;
      align-items:center;
      gap:16px;
    }

    .score{
      color:#fff;
      font-size:52px;
      font-weight:900;
      cursor:pointer;
      user-select:none;
    }

    .dash{color:#fff;font-size:36px;font-weight:700}

    .buttons{
      display:flex;
      justify-content:center;
      gap:10px;
      margin-top:16px;
      flex-wrap:wrap;
    }

    button{
      padding:10px 16px;
      border:none;
      border-radius:12px;
      font-weight:800;
      cursor:pointer;
    }

    .btn-reset{background:#fff}
    .btn-undo{background:#ffd54a}
    .btn-var{background:#ff7676}

    .varStatus{
      color:#fff;
      text-align:center;
      margin-top:12px;
      font-weight:900;
      background:rgba(0,0,0,.6);
      padding:8px 12px;
      border-radius:12px;
    }

    dialog{
      border:none;
      border-radius:16px;
      padding:14px;
      max-width:500px;
      width:90%;
    }

    .grid{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:10px;
      margin-top:10px;
    }

    .pick{
      border:2px solid #ddd;
      border-radius:14px;
      padding:8px;
      cursor:pointer;
      text-align:center;
      background:#fff;
    }

    .pick img{
      width:70px;height:70px;
      border-radius:14px;
      object-fit:cover;
    }
  </style>
</head>
<body>

<div class="app">
  <div class="overlay"></div>

  <div class="content">
    <h1>לוח תוצאות</h1>

    <div class="row">
      <div class="team" onclick="openPicker('home')">
        <div class="logo"><img id="homeLogo" src="assets/team1.png"></div>
        <div class="name" id="homeName">קבוצה א׳</div>
      </div>

      <div class="scorebox">
        <div class="score" id="homeScore">0</div>
        <div class="dash">-</div>
        <div class="score" id="awayScore">0</div>
      </div>

      <div class="team" onclick="openPicker('away')">
        <div class="logo"><img id="awayLogo" src="assets/team2.png"></div>
        <div class="name" id="awayName">קבוצה ב׳</div>
      </div>
    </div>

    <div class="buttons">
      <button class="btn-reset" onclick="resetScore()">איפוס</button>
      <button class="btn-undo" onclick="undoGoal()">בטל גול</button>
      <button class="btn-var" onclick="runVAR()">VAR</button>
    </div>

    <div class="varStatus" id="varStatus">VAR: אין בדיקה כרגע</div>
  </div>
</div>

<audio id="goalSound" src="assets/goal.mp3"></audio>

<dialog id="picker">
  <h3 id="pickerTitle">בחר קבוצה</h3>
  <div class="grid" id="grid"></div>
  <div style="text-align:right;margin-top:10px">
    <button onclick="picker.close()">סגור</button>
  </div>
</dialog>

<script>
const teams = [
  // ישראל
  {name:"מכבי תל אביב", logo:"assets/team1.png"},
  {name:"הפועל תל אביב", logo:"assets/team2.png"},
  {name:"מכבי חיפה", logo:"assets/team3.png"},
  {name:"בית״ר ירושלים", logo:"assets/team4.png"},
  {name:"הפועל באר שבע", logo:"assets/team5.png"},
  {name:"נתניה", logo:"assets/team6.png"},
  {name:"בני ריינה", logo:"assets/beni.png"},
  {name:"פתח תקווה", logo:"assets/pet.png"},
  {name:"הפועל פרדסיה", logo:"assets/par.jpg"},
  
  // אירופה
  {name:"ריאל מדריד", logo:"assets/real.png"},
  {name:"ברצלונה", logo:"assets/barcelona.png"},
  {name:"פריז סן ז'רמן", logo:"assets/psg.png"},
  {name:"מנצ'סטר סיטי", logo:"assets/mancity.png"},
  {name:"מנצ'סטר יונייטד", logo:"assets/manutd.png"},
  {name:"אינטר", logo:"assets/inter.png"},
  {name:"מונאקו", logo:"assets/monaco.png"},
  {name:"יובנטוס", logo:"assets/juve.png"},
  {name:"בייראן מינכן", logo:"assets/muc.png"},
 {name:"דורטמונד", logo:"assets/dort.png"}
];

  const goalSound = document.getElementById("goalSound");
  const homeScore = document.getElementById("homeScore");
  const awayScore = document.getElementById("awayScore");
  const varStatus = document.getElementById("varStatus");

  let lastGoal = null; // "home" / "away"

  function playGoal(){
    try{
      goalSound.currentTime = 0;
      goalSound.play();
    }catch(e){}
  }

  homeScore.onclick = () => addGoal("home");
  awayScore.onclick = () => addGoal("away");

  function addGoal(side){
    if(side==="home") homeScore.textContent++;
    else awayScore.textContent++;
    lastGoal = side;
    varStatus.textContent = "VAR: אפשר לבדוק את הגול האחרון";
    playGoal();
  }

  function resetScore(){
    homeScore.textContent = 0;
    awayScore.textContent = 0;
    lastGoal = null;
    varStatus.textContent = "VAR: אין בדיקה כרגע";
  }

  function undoGoal(){
    if(lastGoal==="home" && homeScore.textContent>0){
      homeScore.textContent--;
    } else if(lastGoal==="away" && awayScore.textContent>0){
      awayScore.textContent--;
    }
    lastGoal = null;
    varStatus.textContent = "VAR: אין בדיקה כרגע";
  }

  function runVAR(){
    if(!lastGoal){
      varStatus.textContent = "VAR: אין גול לבדיקה";
      return;
    }

    const approved = Math.random() < 0.5;

    if(approved){
      varStatus.textContent = "VAR: ✅ הגול אושר!";
    } else {
      varStatus.textContent = "VAR: ❌ הגול נפסל!";
      if(lastGoal==="home" && homeScore.textContent>0) homeScore.textContent--;
      if(lastGoal==="away" && awayScore.textContent>0) awayScore.textContent--;
    }

    lastGoal = null;
  }

  const picker = document.getElementById("picker");
  const grid = document.getElementById("grid");
  let pickSide = "home";

  function openPicker(side){
    pickSide = side;
    document.getElementById("pickerTitle").textContent =
      side==="home" ? "בחר קבוצה (בית)" : "בחר קבוצה (חוץ)";

    grid.innerHTML = "";
    teams.forEach(t=>{
      const d=document.createElement("div");
      d.className="pick";
      d.innerHTML=`<img src="${t.logo}"><div>${t.name}</div>`;
      d.onclick=()=>{
        document.getElementById(pickSide+"Logo").src=t.logo;
        document.getElementById(pickSide+"Name").textContent=t.name;
        picker.close();
      };
      grid.appendChild(d);
    });

    picker.showModal();
  }

  if("serviceWorker" in navigator){
    navigator.serviceWorker.register("sw.js");
  }
</script>

</body>
</html>






